var header=document.getElementById("header"),minCvsh=450;function getCanvasWidth(){return screen.width-15}function getCanvasHeight(){return screen.height<minCvsh?minCvsh:screen.height-150}header.style.width="100%",header.style.height=getCanvasHeight()+"px",function(e){var a=new Object;$.canvas={init:function(){a={main:{id:$("#header")},canvasPre:{id:$("#cvsPre"),size:{width:0,height:0}},canvas:{id:$("#cvs"),size:{width:0,height:0}},velocity:{x:0,y:0},circle:new Shape,fps:new Text,stage:""},$.canvas.initMain(),$.canvas.setting()},initMain:function(){header.style.width="100%",header.style.height=getCanvasHeight()+"px"},setting:function(){var t=a.canvas.id.get(0);t.getContext("2d");a.stage=new Stage(t),a.velocity.x=Math.floor(5*Math.random())+5,a.velocity.y=Math.floor(5*Math.random())+5,$.canvas.resize(),$(e).resize(function(){$.canvas.resize()}),setInterval(function(){$.canvas.star()},1),Ticker.setFPS(30),Ticker.on("tick",$.canvas.tick)},resize:function(){$.canvas.initMain(),a.canvasPre.size.width=a.main.id.width(),a.canvasPre.size.height=getCanvasHeight(),a.canvas.size.width=a.main.id.width(),a.canvas.size.height=getCanvasHeight(),a.canvasPre.id.attr({width:a.canvas.size.width,height:a.canvas.size.height}),a.canvas.id.attr({width:a.canvas.size.width,height:a.canvas.size.height}),a.stage.update()},star:function(){var e=new Shape,t=e.graphics,i=Graphics.getHSL(0,255,255,1),n=Graphics.getHSL(255,255,255,.5),s=15*Math.random(),h={x:Math.random()*a.canvas.size.width,y:Math.random()*a.canvas.size.height};t.beginRadialGradientFill([i,n],[.1,.5],0,0,1,0,0,2*(10*Math.random()+13)),t.drawPolyStar(0,0,s,5,.95,360*Math.random()),t.endFill(),t.beginRadialGradientFill([Graphics.getHSL(255,255,255,.5),Graphics.getHSL(255,255,255,0)],[0,.5],0,0,0,0,0,s),t.drawCircle(0,0,s),t.endFill(),e.compositeOperation="lighter",e.x=h.x,e.y=h.y,e.scaleX=0,e.scaleY=0,e.alpha=0,a.stage.addChild(e),$.canvas.tween(e)},tween:function(e){Tween.get(e).to({scaleX:1,scaleY:1,alpha:1},500,Ease.sineOut).to({scaleX:0,scaleY:0,alpha:0},800,Ease.sineIn).call(function(){$.canvas.remove(this)})},remove:function(e){a.stage.removeChild(e)},tick:function(){a.stage.update()},FPS:function(){var e="FPS : "+Math.round(Ticker.getMeasuredFPS());a.stage.removeChild(a.fps),a.fps=new Text(e,"12px arial","#FFFFFF"),a.fps.textAlign="left",a.fps.textBaseline="top",a.fps.x=10,a.fps.y=10,a.stage.addChild(a.fps)}},e.addEventListener("load",function(e){$.canvas.init()},!1)}(window);